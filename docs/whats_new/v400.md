# What's new in v4.0.0?

Here's an overview of the key changes included in this release.

### 1. New API üÜï

The new version of `dotenv-linter` has a changed API. Now, you must explicitly specify commands and file paths:

| Command | v3.3.1                         | v4.0.0                     |
|---------|--------------------------------|----------------------------|
| Check   | `$ dotenv-linter` (by default) | `$ doctenv-linter check .` |
| Diff    | `$ dotenv-linter compare`      | `$ dotenv-linter diff`     |

Some command options have also changed:

| Option                                      | v3.3.1                | v4.0.0            |
|---------------------------------------------|-----------------------|-------------------|
| Lint checks to bypass                       | `--skip`              | `--ignore-checks` |
| Switch to plain text output without colors  | `--no-color`          | `--plain`         |
| Disable checking for application updates    | `--not-check-updates` | `--skip-updates`  |

### 2. Schema based check üî•

A new schema-based check has been introduced.
A schema is simply a `JSON` file that describes the names of keys and the format of their values.
If a key value is of a different type, `dotenv-linter` will display a warning.

Example of the contents of a schema file (the schema file name can be anything):
```json
// .schema.env.json
{
  "version": "1.0",
  "entries": {
    "NAME": {
      "type": "String",
      "regex": "^DOT*"
    },
    "PORT": {
      "type": "Integer"
    },
    "PRICE": {
      "type": "Float"
    },
    "URL": {
      "type": "Url"
    },
    "EMAIL": {
      "type": "Email"
    },
    "FLAG": {
      "type": "Boolean"
    }
  }
}
```

To run `dotenv-linter` using a schema, there is a special argument `--schema` (or its short version `-s`):

```bash
$ dotenv-linter check --schema .schema.env.json .
Checking .env
.env:1 SchemaViolation: The EMAIL key is not a valid email address
.env:2 SchemaViolation: The FLAG key is not a valid boolean
.env:3 SchemaViolation: The NAME key does not match the regex
.env:4 SchemaViolation: The PORT key is not an integer
.env:5 SchemaViolation: The PRICE key is not a valid float
.env:6 SchemaViolation: The URL key is not a valid URL

Found 6 problems
```

### 3. Division into crates üì¶

Starting with this version, the `dotenv-linter` project is split into 5 separate crates that you can use in your projects:
* [dotenv-core](https://github.com/dotenv-linter/dotenv-linter/tree/master/dotenv-core) - a common crate for `dotenv-linter` crates (contains types that are used across all other crates);
* [dotenv-finder](https://github.com/dotenv-linter/dotenv-linter/tree/master/dotenv-finder) - a crate to find and parse `.env` files;
* [dotenv-analyzer](https://github.com/dotenv-linter/dotenv-linter/tree/master/dotenv-analyzer) - a crate to check and fix `.env` files;
* [dotenv-schema](https://github.com/dotenv-linter/dotenv-linter/tree/master/dotenv-schema) - a crate to validate `.env` files against schemas;
* [dotenv-cli](https://github.com/dotenv-linter/dotenv-linter/tree/master/dotenv-cli) - combines all crates into `dotenv-linter`;

### 4. Improving `Quote Character` check üëç

Previously, `dotenv-linter` could print warnings for lines like this:
```env
DB_CONNECT="authSource=admin&tls=true"
```

In the new version, we have added exceptions for the `&` and `=` symbols, and now the warning for the example above will not be displayed.

### 5. Environment variables üí™

Some settings can be controlled via environment variables.

* `DOTENV_LINTER_IGNORE_CHECKS` - disables checks (multiple checks are specified separated by commas):
```bash
$ DOTENV_LINTER_IGNORE_CHECKS=QuoteCharacter dotenv-linter check .
```

* `DOTENV_LINTER_SKIP_UPDATES` - disables checking for updates:
```bash
$ DOTENV_LINTER_SKIP_UPDATES=true dotenv-linter check .
```

These are all the key changes that are included in the new [v4.0.0](https://github.com/dotenv-linter/dotenv-linter/releases/tag/v4.0.0) release.<br/>
Thanks to everyone who contributed üôè

---

How you can support the project üòâ

* Star on [GitHub](https://github.com/dotenv-linter/dotenv-linter) ‚≠êÔ∏è
* Become a sponsor on [GitHub Sponsors](https://github.com/sponsors/dotenv-linter) or [OpenCollective](https://opencollective.com/dotenv-linter) ‚ù§Ô∏è
* Contribute to the [dotenv-linter](https://github.com/dotenv-linter/dotenv-linter/blob/master/CONTRIBUTING.md) ‚öôÔ∏è
